<!------- R2A Panel Functionalities Below ------------------------------------->

<!-- R2A Multiline textform Starts 3 row under R2A Panel


<!-- Ascii representation of R2A web frame

R2A Panel Basic Layout - Support for Design and Style 
+---------------------------------------------------------------------------------------------+
|           R2A Input Panel                                                                   |
|                                                                                             |
|           R2A.1 Textform for chords                                                         |
|           R2A.2 Textform for text (ignored)                                                 |
|           R2A.3 Textform for chords                                                         |
|           R2A.4 Textform for text (ignored)                                                 |
|           R2A.n n = no of rows no = 10                                                      |
|                                                                                             |
|           Support instruction - Odd rows are chords                                         |
|           Support Instruction - Even rows are ignored                                       |
|                                                                                             |
|           B5: Load Button Validate & Load to R1 textforms named "L" Under the R2A.n rows    |
|           B6: Reset Button for textforms R2A.n named "X" Beside the B5 Button               |
|                                                                                             |
+---------------------------------------------------------------------------------------------+

-->

===== SECTION 1: COMPONENT SPECIFICATIONS =====

R2A Multiline textform input Rows below each other (This data is used to fill in R1 Text forms)
R2A.1 Text Row 1 Odd rows shall be Piano Chords only, valid format start with: capital letter or blank letters
R2A.2 Text Row 2 Even rows ignored

Build 10 rows of R2A.n

R2A Button B5 "L" Load chords to R1 textforms : R1.R2A.n, Button is placed before text form
R2A Button B6 "X" Erase chords from R2A muli line textform, button is placed under B6 and before textform

===== SECTION 2: VALIDATION RULES =====

IMPROVED CHORD VALIDATION INSTRUCTIONS:

1. Enhanced Chord Pattern Recognition
   Root notes: A B C D E F G with optional sharp # or flat b
   Examples: C, C#, Db, F#, Bb
   
2. Valid Chord Qualities
   Basic: major (no suffix), m or min (minor), maj (major)
   Extended: dim (diminished), aug (augmented), sus2, sus4
   Examples: C, Cm, Cmaj, Cdim, Caug, Csus4
   
3. Valid Extensions
   Seventh chords: 7, maj7, m7, dim7, aug7
   Extended: 9, 11, 13, maj9, m9, m11, m13
   Examples: C7, Cmaj7, Cm7, C9, Cmaj9
   
4. Valid Modifiers and Additions
   Additions: add9, add11, add13
   Omissions: no3, no5
   Alterations: b5, #5, b9, #9, #11, b13
   Examples: Cadd9, C7b9, Dm7b5, G7#9
   
5. Slash Chords (Bass Notes)
   Format: ChordName/BassNote
   Examples: C/G, Am7/E, Dm/F
   Rule: Bass note must be valid note A-G with optional # or b
   
6. Multi-Pass Validation Strategy
   Pass 1: Split input line by whitespace
   Pass 2: Test each token against chord pattern
   Pass 3: Validate chord structure (root exists, quality is valid, extension compatible)
   Pass 4: Return array of valid chords plus error list
   
7. Fuzzy Matching for Common Errors (Auto-correct)
   cMaj7 → Cmaj7 (fix lowercase root)
   CM7 → Cmaj7 (expand M7 to maj7)
   Amin → Am (shorten min to m for basic minor)
   Ddim7 → Ddim7 (already valid, no change)
   
8. User Feedback Requirements
   Show count: "5 valid chords loaded"
   Show skipped: "2 invalid entries ignored: pmqpwm, xyz"
   Visual feedback: Green checkmark for valid, red X for invalid
   Tooltip on hover: Show why chord is invalid
   
9. Validation Rules by Complexity Level
   Level 1 - Basic: C, Dm, Fmaj7, G7, A#m
   Level 2 - Extended: Cmaj9, Dm11, G13, Fadd9
   Level 3 - Altered: G7b9, C7#11, Dm7b5, Aaug7
   Level 4 - Slash: C/G, Am7/E, Fmaj7/A
   
10. Invalid Chord Examples to Reject
    Invalid roots: H, J, K (not valid notes)
    Invalid combinations: Cmaj7dim (conflicting qualities)
    Invalid syntax: C-maj7 (hyphen not allowed), C maj7 (space in chord)
    Random text: pmqpwm, xyz, hello
    
11. Test Cases for Validation
    Input: "C Dm F#maj7 invalid G7" → Output: "C Dm F#maj7 G7" (4 valid)
    Input: "Cmaj9 Dm7b5 xyz Aaug" → Output: "Cmaj9 Dm7b5 Aaug" (3 valid)
    Input: "C/G Am7/E hello" → Output: "C/G Am7/E" (2 valid)
    Input: "  C   D   " → Output: "C D" (trim whitespace)
    Input: "" → Output: "" (empty is valid, no error)
    
12. Regex Pattern Structure
    Root: [A-G] required
    Accidental: [#b]? optional
    Quality: (m|maj|min|dim|aug|sus2|sus4)? optional
    Extension: (7|9|11|13)? optional
    Modifier: (add[0-9]+|no[0-9]+|[#b][0-9]+)* optional multiple
    Slash: (/[A-G][#b]?)? optional
    
13. Performance Optimization
    Cache validated chords to avoid re-validation
    Limit input to 1000 characters per text area
    Process maximum 100 chords per load operation
    Show warning if input exceeds limits

===== SECTION 3: MISSING FEATURES & INTEGRATION =====

Missing Features You Need to Implement with JavaScript:
Button functionalities (e.g., Load, Reset, Reset All, Analyze, Play Chord).
Chord validation logic and error feedback for invalid entries.
Dynamic generation of chord lists in R3.
Interactive piano functionality in R2B for highlighting and playbacks.

Real-time chord analysis and updates in R2B.

--- IMPORTANT: Inversion Logic and Playback ---
 
 ### Inversion Logic
 Inversion logic allows for the generation of distinct voicings by rearranging the notes of a chord. By moving the root note to another position within the chord, alternative harmonic structures can be produced. This technology is particularly essential for creating variations of chords such as:
 - **Root Position:** No inversions.
 - **First Inversion:** Root note is moved to the top of the chord.
 - **Second Inversion:** The second note is moved to the top of the chord.
 - Example: C Major (C-E-G) becomes:
   - Root Position: C, E, G
   - First Inversion: E, G, C
   - Second Inversion: G, C, E
 
 **Panels Associated:**
 - **R1 (Piano Entry Panel):** Manual entry of chords with inversion possibilities.
 - **R3 (Chord List Panel):** Includes buttons for different inversions (B9).
 - **R2B (Chord Analysis Panel):** Highlights keys and displays notes for the chosen inversion.
 
 ### Playback Feature
 Real-time playback allows users to hear the chords, individual notes, or chord sequences they input or generate:
 - **Play Chord Button (B10):** Upon clicking, the system generates audio for the suggested chord or inversion.
 - **Interactive Keyboard:** Users can manually interact with the virtual 2-octave piano on-screen to play individual notes.
 
 **Panels Associated:**
 - **R1 (Piano Entry Panel):** Sends the chord data for playback upon clicking the "OK" or "Load" button.
 - **R2A (Text Input Panel):** Valid chord data from text input can be sent for playback.
 - **R2B (Chord Analysis Panel):** Displays the visual and interactive playback of the selected chord.
 
IMPLEMENTATION NOTES:

6.a R1 – Piano Chord Entry (Left Frame)
 Missing functionality to send validated and entered chord data to R3 on button actions (e.g., "OK" or "Load").
 "Reset All" button does not reset the entire R1 section (including help text or other related areas).
 
6.b R3 – Chord List Panel (Dynamic Chord Management)
 Missing chord buttons:
 - B7 (Triad): Display chord in triad voicing
 - B8 (Tetrad): Display chord in tetrad voicing (7th chords)
 - B9 (Inversion/ALT): Cycle through inversions and alternate voicings
 
 Missing functionality:
 - Automatically populate chord list in R3 from validated data in R1
 - Click functionality: clicking any chord or button sends data to R2B for analysis
 - Dynamic updates when new chords are added from R1 or R2A
 
6.c R2B – Chord Analysis Panel (Display & Interactive Piano)
 Missing chord analysis functionality:
 - Display "Notes in Chord" (e.g., C-E-G for C major)
 - Display "Chord Type" (e.g., Major, Minor, Dominant 7th)
 - Display "Alternatives" (suggest related chords)
 
 Missing interactive piano:
 - Highlight corresponding keys for selected chord (from R3 or R1)
 - Visual feedback when keys are pressed
 - Support for different inversions highlighting
 
 Missing workflow integration:
 - Dynamic update R2B when chords are sent from R3 or R1
 - Real-time analysis as user selects different chords
 
CORE IMPLEMENTATION CHECKLIST:
- Implement chord analysis functionality (detecting notes, displaying chord type)
- Implement playback for both individual notes and chords via Web Audio API
- Populate R3 dynamically based on validated input from R1/R2A
- Manage button functionality: B7 (Triad), B8 (Tetrad), B9 (Inversion/ALT)
- Add error handling feedback within the UI (show errors near relevant fields)

===== GENERAL NOTES =====
- The layout uses CSS Grid for organizing the frames and panels within the overall structure.
- Each panel (R1, R2A, R2B, and R3) is responsive and easily extendable for future features.
- Dynamic interactivity between R1, R2A, R2B, and R3 is handled via JavaScript.
- Data flow: R2A/R1 → validation → R3 (chord list) → R2B (analysis & playback)

<!------- R2A Panel Functionalities Above ------------------------------------->