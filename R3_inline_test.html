<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R3 Piano Test - Inline</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .test-container {
            background: #2b2b2b;
            padding: 20px;
            border: 1px solid #444;
            border-radius: 4px;
        }

        .test-svg {
            width: 100%;
            height: 100px;
            border: 2px solid red;
            background-color: #fff;
            margin: 10px 0;
        }

        h3 {
            color: #4fc3f7;
            margin: 10px 0;
        }

        p {
            font-size: 12px;
            color: #aaa;
        }

        .code {
            background: #1a1a1a;
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #4fc3f7;
            font-family: monospace;
            font-size: 11px;
            overflow-x: auto;
        }
    </style>
</head>
<body>

<div class="test-container">
    <h3>Test 1: Simple SVG with Rectangle</h3>
    <svg class="test-svg" id="test1" viewBox="0 0 200 100" preserveAspectRatio="none">
        <!-- Will be filled -->
    </svg>
    <p id="test1-output">SVG element found and will be rendered</p>
</div>

<div class="test-container">
    <h3>Test 2: SVG with Multiple Rectangles (Piano Keys)</h3>
    <svg class="test-svg" id="test2" viewBox="0 0 200 100" preserveAspectRatio="none">
        <!-- Will be filled -->
    </svg>
    <p id="test2-output">Rendering piano keys...</p>
</div>

<div class="test-container">
    <h3>Console Output</h3>
    <div id="console-output" class="code">
        <!-- Console messages will appear here -->
    </div>
</div>

<script>
    // Capture console logs
    const originalLog = console.log;
    const consoleLogs = [];
    
    console.log = function(...args) {
        originalLog.apply(console, args);
        const msg = args.map(arg => typeof arg === 'object' ? JSON.stringify(arg) : String(arg)).join(' ');
        consoleLogs.push(msg);
        document.getElementById('console-output').innerHTML += '<div>' + msg + '</div>';
    };

    console.log('Page loaded');

    // Test 1: Simple rectangle
    const svg1 = document.getElementById('test1');
    console.log('[Test 1] SVG element:', svg1);
    
    if (svg1) {
        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('x', '20');
        rect.setAttribute('y', '20');
        rect.setAttribute('width', '60');
        rect.setAttribute('height', '60');
        rect.setAttribute('fill', 'blue');
        rect.setAttribute('stroke', 'black');
        rect.setAttribute('stroke-width', '1');
        svg1.appendChild(rect);
        console.log('[Test 1] Rectangle appended');
    }

    // Test 2: Piano keys
    function renderPianoTest() {
        const svg = document.getElementById('test2');
        console.log('[Test 2] SVG element:', svg);
        
        if (!svg) {
            console.error('[Test 2] SVG not found!');
            return;
        }

        const notes = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
        const whiteKeyWidth = 200 / 7;
        const whiteKeyHeight = 100;
        
        let xPos = 0;
        notes.forEach((note, idx) => {
            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            rect.setAttribute('x', xPos);
            rect.setAttribute('y', 0);
            rect.setAttribute('width', whiteKeyWidth);
            rect.setAttribute('height', whiteKeyHeight);
            rect.setAttribute('fill', '#f5f5f5');
            rect.setAttribute('stroke', '#999');
            rect.setAttribute('stroke-width', '1');
            svg.appendChild(rect);

            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', xPos + whiteKeyWidth / 2);
            text.setAttribute('y', whiteKeyHeight - 8);
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('font-size', '12');
            text.setAttribute('fill', '#333');
            text.setAttribute('pointer-events', 'none');
            text.textContent = note;
            svg.appendChild(text);

            xPos += whiteKeyWidth;
        });
        
        console.log('[Test 2] Piano keys rendered');
    }

    document.addEventListener('DOMContentLoaded', () => {
        console.log('[Page] DOMContentLoaded fired');
        renderPianoTest();
    });

    // Also try rendering immediately
    renderPianoTest();
</script>

</body>
</html>
