<!--
Copilot Specification.


======================================== Layout below ========================================================

Frames
High-Level Layout Instructions

=== R1 ===
R1 (Piano Entry Panel):
R1: Piano Entry Panel
Purpose:
Displays chords or text data that are automatically populated by B5 from R2A.
If valid chords are input and validated via B5 in R2A, they are automatically loaded into R1.
If no valid chords are present in R2A, no data is loaded into R1, and the form remains blank.
Allows for manual chord entry or editing by the user after loading data from R2A.

Components and Functionality
a0. Text Form (Populated by B5 in R2A):
Functionality:

This text form receives valid chords from R2A when the B5 button is clicked in R2A.
If no valid chords exist in R2A, the field remains blank.
Editable:

Users can manually edit or add new chords after the text form is populated.
Example: User may add additional chords such as G7, A# after chords like C, Dm, and E are auto-filled.
Visual feedback:

Display a message in R1 when B5 successfully transfers data (e.g., "Chords loaded from R2A").
Highlight invalid or missing chords in R2A (e.g., by showing an alert or error message in R2A before transferring to R1).
a. Manual Chord Input Field:
Functionality: Provides an input field where users can enter their own chords manually in case no chords from R2A are loaded or if they wish to make additions.

Validation Rules:

Ensure valid chord notations (e.g., C, G7, Fmaj7, A#, etc.).
Invalid entries should not be permitted. Display an error message, such as "Invalid chord! Please use a valid notation like C or G7."
Behavior:

If a user clicks B2 ("Reset input"), the text input is cleared entirely, whether it's auto-filled by B5 or entered by the user.
Buttons:
B1 – OK Button:

Label: "OK".
Functionality: Takes the currently entered chord data in the text input (a) and loads it into R3 (Chord List Panel).
Behavior:
If the text input is empty or has invalid chords, display an error message: "No valid chords to load into R3."
Else, display a success message (e.g., "Chords successfully loaded into R3").
Input Source:
Manually entered chords in a and optionally, valid chords filled by B5 (R2A).
B2 – Reset Button:

Label: "X".
Functionality: Clears only the text input field (a).
Behavior: Resets any current input/chord data in the input field.
Displays feedback to the user, such as "Field cleared."
B3 – OK Button:

Label: "OK".
Functionality: Loads all valid chords present in the text form from R1 into the R3 Chord List Panel. This includes both:
Any data automatically received from R2A via B5.
Manually entered data in this field.
Feedback: Upon clicking, the output is shown: "All R1 data successfully loaded into R3."
B4 – Reset All Button:

Label: "X".
Functionality: Clears everything in R1, including:
Text input field.
Auto-filled chords from R2A.
Chord data or any state currently displayed in R1.
Feedback: Upon clicking, the user sees a confirmation message: "R1 cleared and reset."
Helptext Section
Description: Provides instructions to guide users when interacting with R1.

Content:

Chord Naming Rules:
Use uppercase letters for chord names.
Separate chords with spaces (e.g., "C G7 Em A#").
Prompts for R2A Interaction:
Clearly indicate: “Chords will be displayed here once validated (B5 button in R2A).”
Provide an example for reference: "C G7 Dm7 F A# Bbm"
R3 Interaction:
Message: "After pressing B1 (OK) or B3 (OK), successfully added chords will appear in R3."
ASCII for R1:
Code
+-------------------+
|        R1         |  <-- (Piano Entry Panel. Spans Height)
| - Chords from     | 
|   R2A a0          | 
| - Text Input (a)  | 
| - [B1: OK]        | 
| - [B2: X]         | 
| - [B3: OK] [Load] | 
| - [B4: X (Reset)] | 
| - Help Text       | 
+-------------------+
These are the complete instructions for R1, exactly matching your provided naming structure. Let me know if they align with your expectations, or if there’s anything you’d like to add or adjust!



=== END R1 =


2. R2A – Text Input Frame:
   - Purpose: 
      - Accepts input in a multi-line text field for chord notations (odd rows) and plain text descriptions (even rows).
      - Each valid chord is validated and sent to R1. 
   - Components:
      a. Text Area: User input field for chords and accompanying text.
      b. B5 "Load" Button: Validates chords and sends them to R1.
      c. B6 "Reset" Button: Clears the input area in R2A.
   - Chord Validation Rules:
      - Only valid chord notations (e.g., C, Dm, Fmaj7, G7, A#) are accepted.
      - Odd rows must contain valid chord notations.
      - Even rows are treated as plain descriptions without validation.
	  - Test data example1 "A" = OK, "A C" = OK, " G  pmqpwm Dmaj7" = "G Dmaj7" = OK

3. R2B – Analysis and Alternate Chords (Chord Analysis Frame):
   - Purpose: 
      - Displays the analysis of a selected chord from R3 or manual input.
      - Visualizes the selected chord on a virtual piano spanning **two octaves (C4 to B5)** with marked keys.
      - Displays the result of analyzing the chord (e.g., triad, tetrad, inversion, alternative chords, etc.).
   - Components:
      a. Visual Piano Keyboard: A graphical 2-octave piano, with white and black keys (C4 to B5).
      b. Text Analysis Section: Displays information about the chord:
         - List of notes in the chord and their analysis.
         - Description of the selected chord type (e.g., "Triad," "Tetrad").
         - Display of alternative chords or inversions.
			a Button B10 in R2B. B10 shall play the chord in R2B
   - Workflow:
      - Chord data comes from R3 when a user clicks on a specific chord or action buttons (B5 B6 B7 (e.g., Triad, Tetrad, Inversion).
      - Marked keys display the corresponding tones of the chord.

4. R3 – Chord List Panel:
   - Frame layout left
   - Purpose:
      - Displays the chords sent from R1.
      - Creates a horizontal row of chords, which automatically fills and creates new rows if space is exceeded.
   - Components:
      a. List of Chords:
         - Chords from R1 are displayed row by row, left to right.
         - The displayed number of chords matches what is in R1.
      b. Buttons for Each Chord:
         - B7 Triad: Displays the triad of the chord in R2B.
         - B8 Tetrad: Displays the tetrad of the chord in R2B.
         - B9 Inversion/ALT: Displays inversions or alternative chord voicings in R2B.
		 
		 
		 
		 
5. Additional Inatructions - wait

5.a The term R2A and R2B could be renamed to more descriptive names, such as "Text Input Panel" and 
5.b "Chord Analysis Panel," to make the description clearer, especially for non-technical stakeholders.
5.c R2A alternative Name "Text Input Panel R2A"
5.d R2B alternative Name "Text Input Panel R2B"
5.e Interactive Feedback/Transitions:
5.f The "Reset" buttons have no confirmation message?
5.g No results of validation (e.g., errors like invalid chords) surface?
5.h Piano keys shall sound when as a chord or individually when loaded B3 = OK and B6 B7 B8



Do not do anything Below
Do not do anything Below
Do not do anything Below
Do not do anything Below
Do I need to repeat myseel?

=== Implement Missinf Functionalities ===

Missing Features You Need to Implement with JavaScript:
Button functionalities (e.g., Load, Reset, Reset All, Analyze, Play Chord).
Chord validation logic and error feedback for invalid entries.
Dynamic generation of chord lists in R3.
Interactive piano functionality in R2B for highlighting and playbacks.
Real-time chord analysis and updates in R2B.

==== Action Required Below =====
## Inversion Logic and Playback

### Inversion Logic
Inversion logic allows for the generation of distinct voicings by rearranging the notes of a chord. By moving the root note to another position within the chord, alternative harmonic structures can be produced. This technology is particularly essential for creating variations of chords such as:
- **Root Position:** No inversions.
- **First Inversion:** Root note is moved to the top of the chord.
- **Second Inversion:** The second note is moved to the top of the chord.
- Example: C Major (C-E-G) becomes:
  - Root Position: C, E, G
  - First Inversion: E, G, C
  - Second Inversion: G, C, E

**Panels Associated:**
- **R1 (Piano Entry Panel):** Manual entry of chords with inversion possibilities.
- **R3 (Chord List Panel):** Includes buttons for different inversions (B9).
- **R2B (Chord Analysis Panel):** Highlights keys and displays notes for the chosen inversion.

### Playback Feature
Real-time playback allows users to hear the chords, individual notes, or chord sequences they input or generate:
- **Play Chord Button (B10):** Upon clicking, the system generates audio for the suggested chord or inversion.
- **Interactive Keyboard:** Users can manually interact with the virtual 2-octave piano on-screen to play individual notes.

**Panels Associated:**
- **R1 (Piano Entry Panel):** Sends the chord data for playback upon clicking the "OK" or "Load" button.
- **R2A (Text Input Panel):** Valid chord data from text input can be sent for playback.
- **R2B (Chord Analysis Panel):** Displays the visual and interactive playback of the selected chord.

6 Change as required
6.a R1 – Pianoackord (Left Frame)
Missing functionality to send validated and entered chord data to R3 on button actions (e.g., "OK" or "Load").
"Reset All" button does not reset the entire R1 section (including help text or other related areas).

=== Additional functionality ====

Implement chord analysis functionality (e.g., detecting notes, displaying chord type).
Implement playback for both individual notes and chords via the Web Audio API.
Populate R3 dynamically based on the input and manage button functionality (Triad, Tetrad, Inversion/ALT).
Add error handling feedback within the UI directly (e.g., show errors near corresponding buttons or text fields).

=== Additional functionality ====


==== Action Required Above =====

============================================= All done ation in group part below =====================
6.R2A – Text Input Frame - All done
Missing validation for chord notations: No Validation Now
Odd rows must validate as chord notations: 
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Even rows are treated as plain text without validation: Not Implemented Now
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Missing functionality to send validated chords from odd rows to R1: Insert changed code, update complete file, comment: inserted, whole file kept integrity
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Missing feedback for detected invalid chords (e.g., invalid entries are ignored, but the user is not notified):
Not done Now

6.R3 – Chord List Panel
Missing chord buttons:
Insert changed code, update complete file, comment: inserted, whole file kept integrity

B7 (Triad), B8 (Tetrad), and B9 (Inversion/ALT) buttons for each chord are not implemented.
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Missing functionality to automatically populate the chord list in R3 from validated data in R1.
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Missing click functionality for chord buttons:
Insert changed code, update complete file, comment: inserted, whole file kept integrity

Clicking on any chord or its associated buttons does not send data to R2B for analysis.
Insert changed code, update complete file, comment: inserted, whole file kept integrity

6.R2B – Analysis and Alternate Chords Frame
Missing chord analysis functionality:
No logic to display "Notes in Chord," "Chord Type," and "Alternatives" when a chord is selected.
Missing interactive piano:
Functionality to highlight corresponding keys for the selected chord (from R3 or R1) is not implemented.
Missing link with R3 or R1 actions:
No workflow to dynamically update R2B when chords are sent from R3 or R1.
Let me know if you'd like me to elaborate further or assist in implementing these missing features!
All Insert changed code, update complete file, comment: inserted, whole file kept integrity

============================================= All done ation in group part above =====================


General Notes:
- The layout uses `CSS Grid` for organizing the frames and panels within the overall structure.
- Each panel (R1, R2A, R2B, and R3) is responsive and easily extendable for future features or adjustments.
- Dynamic interactivity between R1, R2A, R2B, and R3 is handled via JavaScript.
-->
