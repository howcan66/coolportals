<!------- R2A Panel Functionalities Below ------------------------------------->
<!------- R2A Panel Functionalities Below ------------------------------------->
<!------- R2A Panel Functionalities Below ------------------------------------->

<-- R2A Multiline textform Starts 3 row under R2A Panel

R2A Multiline textform input Rows below each other (This data is used to fill in R1 Text forms)
R2A.1 Text Row 1 Odd rows shall be Piano Chords only, valid format start with: capital letter or blank letters
R2A.2 Text Row 2 Even rows ignored

Build 10 rows of R2A.n

R2A Button B5 "L" Load chords to R1 textforms : R1.R2A.n, Button is placed before text form
R2A Button B6 "X" Erase chords from R2A muli line textform, button is placed under B6 and before textform


2. R2A – Text Input Frame:
   - Purpose: 
      - Accepts input in a multi-line text field for chord notations (odd rows) and plain text descriptions (even rows).
      - Each valid chord is validated and sent to R1. 
   - Components:
      a. Text Area: User input field for chords and accompanying text.
      b. B5 "Load" Button: Validates chords and sends them to R1.
      c. B6 "Reset" Button: Clears the input area in R2A.
	  
	  	  
	  
-->  
<!--
Instruktioner för R2A – Textinmatning

Skriv in dina ackord och beskrivningar i textfältet nedan.
Varje rad i textfältet motsvarar en separat post:

Udda rader (1, 3, 5, ...): Här ska du skriva pianoackord, t.ex. Cmaj7, Dm, F#dim. Endast giltiga ackord enligt reglerna accepteras.
Jämna rader (2, 4, 6, ...): Här kan du skriva valfri beskrivande text. Dessa rader ignoreras vid ackordöverföring.


Du kan skriva flera ackord på samma udda rad, separerade med mellanslag.
Tryck på knappen "L" för att ladda alla giltiga ackord från udda rader till R1-panelen. Ogiltiga ackord ignoreras tyst.
Tryck på knappen "X" för att rensa hela textfältet.
Endast de ackord som är korrekt formaterade och placerade på udda rader kommer att skickas till R1.
Exempel på giltig inmatning:
Cmaj7 Dm7
Min favoritackord
F#dim G7
Ackord till refräng


Rad 1: Cmaj7 Dm7 (båda ackord skickas till R1)
Rad 2: Beskrivning (ignoreras)
Rad 3: F#dim G7 (båda ackord skickas till R1)
Rad 4: Beskrivning (ignoreras)

R2A Chord validation improvements -->
   - Chord Validation Rules:
      - Only valid chord notations (e.g., C, Dm, Fmaj7, G7, A#) are accepted.
      - Odd rows must contain valid chord notations.
      - Even rows are treated as plain descriptions without validation.
	  - Test data example1 "A" = OK, "A C" = OK, " G  pmqpwm Dmaj7" = "G Dmaj7" = OK

IMPROVED CHORD VALIDATION INSTRUCTIONS:

1. Enhanced Chord Pattern Recognition
   Root notes: A B C D E F G with optional sharp # or flat b
   Examples: C, C#, Db, F#, Bb
   
2. Valid Chord Qualities
   Basic: major (no suffix), m or min (minor), maj (major)
   Extended: dim (diminished), aug (augmented), sus2, sus4
   Examples: C, Cm, Cmaj, Cdim, Caug, Csus4
   
3. Valid Extensions
   Seventh chords: 7, maj7, m7, dim7, aug7
   Extended: 9, 11, 13, maj9, m9, m11, m13
   Examples: C7, Cmaj7, Cm7, C9, Cmaj9
   
4. Valid Modifiers and Additions
   Additions: add9, add11, add13
   Omissions: no3, no5
   Alterations: b5, #5, b9, #9, #11, b13
   Examples: Cadd9, C7b9, Dm7b5, G7#9
   
5. Slash Chords (Bass Notes)
   Format: ChordName/BassNote
   Examples: C/G, Am7/E, Dm/F
   Rule: Bass note must be valid note A-G with optional # or b
   
6. Multi-Pass Validation Strategy
   Pass 1: Split input line by whitespace
   Pass 2: Test each token against chord pattern
   Pass 3: Validate chord structure (root exists, quality is valid, extension compatible)
   Pass 4: Return array of valid chords plus error list
   
7. Fuzzy Matching for Common Errors (Auto-correct)
   cMaj7 → Cmaj7 (fix lowercase root)
   CM7 → Cmaj7 (expand M7 to maj7)
   Amin → Am (shorten min to m for basic minor)
   Ddim7 → Ddim7 (already valid, no change)
   
8. User Feedback Requirements
   Show count: "5 valid chords loaded"
   Show skipped: "2 invalid entries ignored: pmqpwm, xyz"
   Visual feedback: Green checkmark for valid, red X for invalid
   Tooltip on hover: Show why chord is invalid
   
9. Validation Rules by Complexity Level
   Level 1 - Basic: C, Dm, Fmaj7, G7, A#m
   Level 2 - Extended: Cmaj9, Dm11, G13, Fadd9
   Level 3 - Altered: G7b9, C7#11, Dm7b5, Aaug7
   Level 4 - Slash: C/G, Am7/E, Fmaj7/A
   
10. Invalid Chord Examples to Reject
    Invalid roots: H, J, K (not valid notes)
    Invalid combinations: Cmaj7dim (conflicting qualities)
    Invalid syntax: C-maj7 (hyphen not allowed), C maj7 (space in chord)
    Random text: pmqpwm, xyz, hello
    
11. Test Cases for Validation
    Input: "C Dm F#maj7 invalid G7" → Output: "C Dm F#maj7 G7" (4 valid)
    Input: "Cmaj9 Dm7b5 xyz Aaug" → Output: "Cmaj9 Dm7b5 Aaug" (3 valid)
    Input: "C/G Am7/E hello" → Output: "C/G Am7/E" (2 valid)
    Input: "  C   D   " → Output: "C D" (trim whitespace)
    Input: "" → Output: "" (empty is valid, no error)
    
12. Regex Pattern Structure
    Root: [A-G] required
    Accidental: [#b]? optional
    Quality: (m|maj|min|dim|aug|sus2|sus4)? optional
    Extension: (7|9|11|13)? optional
    Modifier: (add[0-9]+|no[0-9]+|[#b][0-9]+)* optional multiple
    Slash: (/[A-G][#b]?)? optional
    
13. Performance Optimization
    Cache validated chords to avoid re-validation
    Limit input to 1000 characters per text area
    Process maximum 100 chords per load operation
    Show warning if input exceeds limits


Missing Features You Need to Implement with JavaScript:
Button functionalities (e.g., Load, Reset, Reset All, Analyze, Play Chord).
Chord validation logic and error feedback for invalid entries.
Dynamic generation of chord lists in R3.
Interactive piano functionality in R2B for highlighting and playbacks.

Real-time chord analysis and updates in R2B.

==== Action Required Below =====
 ## Inversion Logic and Playback
 
 ### Inversion Logic
 Inversion logic allows for the generation of distinct voicings by rearranging the notes of a chord. By moving the root note to another position within the chord, alternative harmonic structures can be produced. This technology is particularly essential for creating variations of chords such as:
 - **Root Position:** No inversions.
 - **First Inversion:** Root note is moved to the top of the chord.
 - **Second Inversion:** The second note is moved to the top of the chord.
 - Example: C Major (C-E-G) becomes:
   - Root Position: C, E, G
   - First Inversion: E, G, C
   - Second Inversion: G, C, E
 
 **Panels Associated:**
 - **R1 (Piano Entry Panel):** Manual entry of chords with inversion possibilities.
 - **R3 (Chord List Panel):** Includes buttons for different inversions (B9).
 - **R2B (Chord Analysis Panel):** Highlights keys and displays notes for the chosen inversion.
 
 ### Playback Feature
 Real-time playback allows users to hear the chords, individual notes, or chord sequences they input or generate:
 - **Play Chord Button (B10):** Upon clicking, the system generates audio for the suggested chord or inversion.
 - **Interactive Keyboard:** Users can manually interact with the virtual 2-octave piano on-screen to play individual notes.
 
 **Panels Associated:**
 - **R1 (Piano Entry Panel):** Sends the chord data for playback upon clicking the "OK" or "Load" button.
 - **R2A (Text Input Panel):** Valid chord data from text input can be sent for playback.
 - **R2B (Chord Analysis Panel):** Displays the visual and interactive playback of the selected chord.
 
 6 Change as required
 6.a R1 – Pianoackord (Left Frame)
 Missing functionality to send validated and entered chord data to R3 on button actions (e.g., "OK" or "Load").
 "Reset All" button does not reset the entire R1 section (including help text or other related areas).
 
 === Additional functionality ====
 
 Implement chord analysis functionality (e.g., detecting notes, displaying chord type).
 Implement playback for both individual notes and chords via the Web Audio API.
 Populate R3 dynamically based on the input and manage button functionality (Triad, Tetrad, Inversion/ALT).
 Add error handling feedback within the UI directly (e.g., show errors near corresponding buttons or text fields).
 
 === Additional functionality ====
 
 
 ==== Action Required Above =====
 
 ============================================= All done ation in group part below =====================
 6.R2A – Text Input Frame - All done
 Missing validation for chord notations: No Validation Now
 Odd rows must validate as chord notations: 
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Even rows are treated as plain text without validation: Not Implemented Now
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Missing functionality to send validated chords from odd rows to R1: Insert changed code, update complete file, comment: inserted, whole file kept integrity
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Missing feedback for detected invalid chords (e.g., invalid entries are ignored, but the user is not notified):
 Not done Now
 
 6.R3 – Chord List Panel
 Missing chord buttons:
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 B7 (Triad), B8 (Tetrad), and B9 (Inversion/ALT) buttons for each chord are not implemented.
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Missing functionality to automatically populate the chord list in R3 from validated data in R1.
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Missing click functionality for chord buttons:
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 Clicking on any chord or its associated buttons does not send data to R2B for analysis.
 Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 6.R2B – Analysis and Alternate Chords Frame
 Missing chord analysis functionality:
 No logic to display "Notes in Chord," "Chord Type," and "Alternatives" when a chord is selected.
 Missing interactive piano:
 Functionality to highlight corresponding keys for the selected chord (from R3 or R1) is not implemented.
 Missing link with R3 or R1 actions:
 No workflow to dynamically update R2B when chords are sent from R3 or R1.
 Let me know if you'd like me to elaborate further or assist in implementing these missing features!
 All Insert changed code, update complete file, comment: inserted, whole file kept integrity
 
 ============================================= All done ation in group part above =====================
 
 General Notes:
 - The layout uses `CSS Grid` for organizing the frames and panels within the overall structure.
 - Each panel (R1, R2A, R2B, and R3) is responsive and easily extendable for future features or adjustments.
 - Dynamic interactivity between R1, R2A, R2B, and R3 is handled via JavaScript.
 -->
 <!------- R2A Panel Functionalities Above ------------------------------------->
 <!------- R2A Panel Functionalities Above ------------------------------------->
 <!------- R2A Panel Functionalities Above ------------------------------------->
 

==== Action Required Below =====

6 Change as required
6.a R1 – Pianoackord (Left Frame)
Missing functionality to send validated and entered chord data to R3 on button actions (e.g., "OK" or "Load").
"Reset All" button does not reset the entire R1 section (including help text or other related areas).

=== Additional functionality ====

Implement chord analysis functionality (e.g., detecting notes, displaying chord type).
Implement playback for both individual notes and chords via the Web Audio API.
Populate R3 dynamically based on the input and manage button functionality (Triad, Tetrad, Inversion/ALT).
Add error handling feedback within the UI directly (e.g., show errors near corresponding buttons or text fields).

=== Additional functionality ====


==== Action Required Above =====

General Notes:
- The layout uses `CSS Grid` for organizing the frames and panels within the overall structure.
- Each panel (R1, R2A, R2B, and R3) is responsive and easily extendable for future features or adjustments.
- Dynamic interactivity between R1, R2A, R2B, and R3 is handled via JavaScript.
-->
<!------- R2A Panel Functionalities Above ------------------------------------->
<!------- R2A Panel Functionalities Above ------------------------------------->
<!------- R2A Panel Functionalities Above ------------------------------------->